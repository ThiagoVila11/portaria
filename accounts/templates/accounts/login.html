{% extends "base.html" %}

{% block title %}Login · Portaria{% endblock %}
{% block page_title %}Login{% endblock %}

{% block content %}
  <div class="card" style="max-width:420px; padding:16px">

    {% if form.errors %}
      <div class="msg error">Usuário ou senha inválidos.</div>
    {% endif %}

    {% if next %}
      <p class="muted">Faça login para acessar: <code>{{ next }}</code></p>
    {% endif %}

    <form method="post" action="{% url 'login' %}">
      {% csrf_token %}

      <!-- Campos explícitos (funciona com LoginView padrão) -->
      <p>
        <label for="id_username">Usuário</label><br>
        <input type="text" name="username" id="id_username" required autofocus
               value="{{ form.username.value|default_if_none:'' }}">
      </p>
      <p>
        <label for="id_password">Senha</label><br>
        <input type="password" name="password" id="id_password" required>
      </p>

      <input type="hidden" name="next" value="{{ next }}">

      <div style="display:flex; gap:8px; margin-top:10px">
        <button class="btn" type="submit">Entrar</button>
        <a class="btn-outline" href="{% url 'dashboard' %}">Voltar</a>
      </div>
    </form>

    <!-- Se preferir usar o form padrão:
    <form method="post" action="{% url 'login' %}">
      {% csrf_token %}
      {{ form.as_p }}
      <button class="btn">Entrar</button>
    </form>
    -->
  </div>
{% endblock %}

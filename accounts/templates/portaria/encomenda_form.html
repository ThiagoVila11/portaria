{% extends "base.html" %}

{% block title %}{{ obj|default:"Nova Encomenda" }} · Portaria{% endblock %}
{% block page_title %}{{ obj|default:"Nova Encomenda" }}{% endblock %}

{% block content %}
<div class="card" style="padding:16px">
  <form method="post" enctype="multipart/form-data" style="display:grid; gap:12px">
    {% csrf_token %}

    <!-- Erros gerais -->
    {% if form.non_field_errors %}
      <div class="msg error">
        {{ form.non_field_errors }}
      </div>
    {% endif %}

    <!-- Campos (render explícito, bonito e com erros por campo) -->
    <div style="display:grid; gap:10px; grid-template-columns: repeat(2, minmax(220px, 1fr));">
      <label style="display:grid; gap:6px">
        <span>Condomínio</span>
        {{ form.condominio }}
        {{ form.condominio.errors }}
      </label>

      <label style="display:grid; gap:6px">
        <span>Unidade</span>
        {{ form.unidade }}
        {{ form.unidade.errors }}
      </label>

      <label style="display:grid; gap:6px; grid-column: 1 / -1;">
        <span>Destinatário</span>
        {{ form.destinatario }}
        {{ form.destinatario.errors }}
      </label>

      <label style="display:grid; gap:6px">
        <span>Transportadora</span>
        {{ form.transportadora }}
        {{ form.transportadora.errors }}
      </label>

      <label style="display:grid; gap:6px">
        <span>Código de rastreio</span>
        {{ form.codigo_rastreamento }}
        {{ form.codigo_rastreamento.errors }}
      </label>

      <label style="display:grid; gap:6px; grid-column: 1 / -1;">
        <span>Observações</span>
        {{ form.observacoes }}
        {{ form.observacoes.errors }}
      </label>

      {% if form.etiqueta_imagem %}
      <label style="display:grid; gap:6px">
        <span>Etiqueta (imagem)</span>
        {{ form.etiqueta_imagem }}
        {{ form.etiqueta_imagem.errors }}
      </label>
      {% endif %}

      <label style="display:grid; gap:6px">
        <span>Status</span>
        {{ form.status }}
        {{ form.status.errors }}
      </label>
    </div>

    <div style="display:flex; gap:8px; margin-top:8px">
      <button class="btn" type="submit">Salvar</button>
      <a class="btn-outline" href="{% url 'encomenda_list' %}">Cancelar</a>
    </div>
  </form>
</div>
{% endblock %}

